function getRandomInt(e,a){return e=Math.ceil(e),a=Math.floor(a),Math.floor(Math.random()*(a-e))+e}function randomCell(){return[getRandomInt(0,snakeArea.grid[0]),getRandomInt(0,snakeArea.grid[0])]}function getCookie(e){var a=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return a?decodeURIComponent(a[1]):void 0}function mainFunc(){var e="right";$("body").on("keydown",function(a){if(0==game.mode.mirror)switch(a.which){case 39:snake.side="left"==e?"left":"right",e=snake.side;break;case 38:snake.side="down"==e?"down":"up",e=snake.side;break;case 40:snake.side="up"==e?"up":"down",e=snake.side;break;case 37:snake.side="right"==e?"right":"left",e=snake.side;break;default:snake.side="left"==e?"left":"right",e=snake.side}else switch(console.log("mirror"),a.which){case 39:snake.side="right"==e?"right":"left",e=snake.side;break;case 40:snake.side="down"==e?"down":"up",e=snake.side;break;case 38:snake.side="up"==e?"up":"down",e=snake.side;break;case 37:snake.side="left"==e?"left":"right",e=snake.side;break;default:snake.side="right"==e?"right":"left",e=snake.side}console.log(snake.side)}),$(".pause").on("click",function(){"pauseOff"==$(this).attr("id")?($(this).attr("id","pauseOn").text("Continue"),game.stop()):"pauseOn"==$(this).attr("id")&&($(this).attr("id","pauseOff").text("Pause"),game.start())}),$(".speedControl button").on("click",function(){$(this).hasClass("active")||($(".active").removeClass("active"),$(this).addClass("active"),snake.speed=$(this).attr("data-speed-game"),snake.snakeMoves())}),$(".newGame").on("click",function(){location.reload(),game.newGame()}),$("button.strict").on("click",function(){"Off"==$(this).attr("data-strict")?(game.mode.strict="false",$(this).attr("data-strict","On").text("On")):(game.mode.strict="true",$(this).attr("data-strict","Off").text("Off"))}),$("button.mirror").on("click",function(){"Off"==$(this).attr("data-mirror")?(game.mode.mirror=!1,$(this).attr("data-mirror","On").text("On")):(game.mode.mirror=!0,$(this).attr("data-mirror","Off").text("Off"))})}var game={score:0,highScore:0,changeScore:function(){game.score+=10,$("h3.score span").text(game.score),snake.speed=game.score>100&&300==snake.speed?snake.speed-100:game.score>200&&200==snake.speed?snake.speed-100:game.score>300&&100==snake.speed?snake.speed-50:snake.speed,snake.snakeMoves()},newGame:function(){game.score=0,snakeArea.init(),snake.snakeDrawFirst(),food.init(),game.start()},gameOver:function(){game.stop(),$(".gameOver").css("display","inline-block"),$(".wrapper").css("display","none"),setTimeout(function(){$(".gameOver").css("display","none"),$(".wrapper").css("display","inline-block"),location.reload(),game.newGame()},3e3)},mode:{strict:!0,mirror:!1},stop:function(){snake.pause=!0,snake.snakeMoves()},start:function(){snake.pause=!1,snake.snakeMoves()}},snakeArea={grid:[25,25],init:function(){for(var e,a=0;a<this.grid[0];a++)for(j=0;j<this.grid[1];j++)e+='<div class="block" cell-i="'+a+'" cell-j="'+j+'"></div>';$("#gameArea .wrapper").append(e)}},food={newFoodcoord:function(){return randomCell()},drawFood:function(e){var a=$(".block[cell-i='"+e[0]+"'][cell-j='"+e[1]+"']");$(a).attr("data-food","food")},init:function(){var e=this.newFoodcoord(),a=$(".block[cell-i='"+e[0]+"'][cell-j='"+e[1]+"']");$(".block[data-food='food']").attr("data-food",""),"head"==a.attr("id")||a.hasClass("tail")?this.init():this.drawFood(e)}},snake={snakeLength:4,speed:300,pause:!1,myInterval:void 0,SnakeArr:[[Math.round(snakeArea.grid[0]/2),5]],side:"right",snakeDrawFirst:function(){var e=$(".block[cell-i='"+this.SnakeArr[0][0]+"'][cell-j='"+this.SnakeArr[0][1]+"']");$(e).attr("id","head");for(var a=1;a<snake.snakeLength;a++){var n=this.SnakeArr[0][1]-a,t=$(".block[cell-i='"+this.SnakeArr[0][0]+"'][cell-j='"+n+"']");$(t).addClass("tail"),this.SnakeArr.push([this.SnakeArr[0][0],n])}},snakeDraw:function(e){var a=$(".block[cell-i='"+e[0][0]+"'][cell-j='"+e[0][1]+"']");$(a).attr("id","head");for(var n=1;n<e.length;n++){var t=$(".block[cell-i='"+e[n][0]+"'][cell-j='"+e[n][1]+"']");$(t).addClass("tail")}},snakeClearOld:function(){$(".tail").removeClass("tail"),$("#head").attr("id","")},snakeChangePosition:{changeTail:function(e){for(var a=[],n=1;n<e.length;n++)a[n]=e[n-1];return a},up:function(e){return[e[0][0]-1,e[0][1]]},down:function(e){return[e[0][0]+1,e[0][1]]},left:function(e){return[e[0][0],e[0][1]-1]},right:function(e){return[e[0][0],e[0][1]+1]},move:function(e,a){var n=[];n=this.changeTail(e),n[0]=this[a](e),snake.SnakeArr=n}},snakeEats:function(){$cellHead=$("#head"),"food"==$cellHead.attr("data-food")&&(snake.snakeLength++,snake.SnakeArr.push([]),food.init(),game.changeScore())},snakeDies:function(){for(var e=1;e<snake.SnakeArr.length;e++)snake.SnakeArr[0][0]==snake.SnakeArr[e][0]&&snake.SnakeArr[0][1]==snake.SnakeArr[e][1]&&(game.stop(),setTimeout(function(){game.gameOver()},500));1==game.mode.strict?snake.SnakeArr[0][0]!=snakeArea.grid[0]&&snake.SnakeArr[0][1]!=snakeArea.grid[1]&&snake.SnakeArr[0][0]!=-1&&snake.SnakeArr[0][1]!=-1||(game.stop(),setTimeout(function(){game.gameOver()},500)):alert("It is not a strict mode!")},snakeMoves:function(){snake.pause===!0?clearInterval(snake.myInterval):(clearInterval(snake.myInterval),snake.myInterval=setInterval(function(){snake.snakeChangePosition.move(snake.SnakeArr,snake.side),snake.snakeDies(),snake.snakeEats(),snake.snakeClearOld(),snake.snakeDraw(snake.SnakeArr)},snake.speed))}};$(document).ready(function(){mainFunc(),game.newGame()});